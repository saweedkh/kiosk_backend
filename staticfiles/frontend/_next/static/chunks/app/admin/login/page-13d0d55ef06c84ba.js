(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[920],{7851:function(e,t,r){Promise.resolve().then(r.bind(r,7813))},7813:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(7437),n=r(2265),s=r(9376),i=r(9501),o=r(3590),l=r(7119),d=r(521),c=r(9345),u=r(6196),x=r(3405);let m={login:async e=>(await x.x.post("/api/kiosk/admin/auth/login/",e)).data};var k=r(7926),p=r(1699);let h=l.Ry({username:l.Z_().min(1,"نام کاربری الزامی است"),password:l.Z_().min(1,"رمز عبور الزامی است")});function g(){var e,t;let r=(0,s.useRouter)(),{setAuth:l}=(0,k.t)(),[x,g]=(0,n.useState)(!1),[f,b]=(0,n.useState)(null),{register:y,handleSubmit:v,formState:{errors:w}}=(0,i.cI)({resolver:(0,o.F)(h)}),j=async e=>{g(!0),b(null);try{let t=await m.login(e);t.success&&t.result?(l(t.result.access_token,t.result.refresh_token,t.result.user_info),r.push("/admin")):b("نام کاربری یا رمز عبور اشتباه است")}catch(e){var t,a,n,s;b((null===(s=e.response)||void 0===s?void 0:null===(n=s.data)||void 0===n?void 0:null===(a=n.messages)||void 0===a?void 0:null===(t=a.non_field_errors)||void 0===t?void 0:t[0])||"خطا در ورود به سیستم")}finally{g(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-background dark:bg-background-dark flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"absolute top-4 left-4",children:(0,a.jsx)(p.T,{})}),(0,a.jsx)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"w-full max-w-md 2k:max-w-2xl 4k:max-w-4xl",children:(0,a.jsxs)("div",{className:"bg-card dark:bg-card-dark rounded-2xl shadow-xl p-8 2k:p-12 4k:p-16 border border-border dark:border-border-dark",children:[(0,a.jsxs)("div",{className:"text-center mb-8 2k:mb-12 4k:mb-16",children:[(0,a.jsx)("h1",{className:"text-3xl 2k:text-5xl 4k:text-7xl font-bold text-text dark:text-text-dark mb-2 2k:mb-4 4k:mb-6",children:"پنل مدیریت"}),(0,a.jsx)("p",{className:"text-text-secondary dark:text-gray-400 2k:text-xl 4k:text-2xl",children:"لطفا وارد حساب کاربری خود شوید"})]}),(0,a.jsxs)("form",{onSubmit:v(j),className:"space-y-6 2k:space-y-8 4k:space-y-10",children:[(0,a.jsx)(u.I,{label:"نام کاربری",type:"text",placeholder:"نام کاربری خود را وارد کنید",error:null===(e=w.username)||void 0===e?void 0:e.message,...y("username")}),(0,a.jsx)(u.I,{label:"رمز عبور",type:"password",placeholder:"رمز عبور خود را وارد کنید",error:null===(t=w.password)||void 0===t?void 0:t.message,...y("password")}),f&&(0,a.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},className:"p-3 2k:p-4 4k:p-5 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400 text-sm 2k:text-base 4k:text-lg",children:f}),(0,a.jsx)(c.z,{type:"submit",variant:"primary",size:"lg",isLoading:x,className:"w-full",children:"ورود به پنل"})]})]})})]})}},9345:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var a=r(7437),n=r(2265),s=r(4508),i=r(521);let o=(0,n.forwardRef)((e,t)=>{let{className:r,variant:n="primary",size:o="md",isLoading:l=!1,disabled:d,children:c,...u}=e;return(0,a.jsx)(i.E.button,{ref:t,className:(0,s.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary text-white hover:bg-primary-light focus:ring-primary dark:bg-primary dark:hover:bg-primary-light",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",outline:"border-2 border-primary text-primary hover:bg-primary hover:text-white dark:border-primary dark:text-primary dark:hover:bg-primary dark:hover:text-white",ghost:"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800"}[n],{sm:"px-4 py-2 text-sm 2k:px-5 2k:py-2.5 2k:text-base 4k:px-6 4k:py-3 4k:text-lg",md:"px-6 py-3 text-base 2k:px-7 2k:py-3.5 2k:text-lg 4k:px-9 4k:py-4.5 4k:text-xl",lg:"px-8 py-4 text-lg 2k:px-10 2k:py-5 2k:text-xl 4k:px-12 4k:py-6 4k:text-2xl"}[o],r),disabled:d||l,whileHover:d||l?void 0:{scale:1.02},whileTap:d||l?void 0:{scale:.98},...u,children:l?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"در حال بارگذاری..."})]}):c})});o.displayName="Button"},6196:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(7437),n=r(2265),s=r(4508);let i=(0,n.forwardRef)((e,t)=>{let{className:r,label:n,error:i,...o}=e;return(0,a.jsxs)("div",{className:"w-full",children:[n&&(0,a.jsx)("label",{className:"block mb-2 text-sm 2k:text-lg 4k:text-xl font-medium text-text dark:text-text-dark",children:n}),(0,a.jsx)("input",{ref:t,className:(0,s.cn)("w-full px-4 py-3 2k:px-6 2k:py-4 4k:px-8 4k:py-5 rounded-lg border border-border dark:border-border-dark","bg-card dark:bg-card-dark text-text dark:text-text-dark","text-base 2k:text-lg 4k:text-xl","focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent","transition-all duration-200","disabled:opacity-50 disabled:cursor-not-allowed",i&&"border-red-500 focus:ring-red-500",r),...o}),i&&(0,a.jsx)("p",{className:"mt-1 text-sm 2k:text-base 4k:text-lg text-red-500 dark:text-red-400",children:i})]})});i.displayName="Input"},1699:function(e,t,r){"use strict";r.d(t,{T:function(){return i}});var a=r(7437),n=r(2009),s=r(521);function i(){let{theme:e,toggleTheme:t}=(0,n.f)();return(0,a.jsx)("button",{onClick:t,className:"relative p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"تغییر تم",children:(0,a.jsx)(s.E.div,{initial:!1,animate:{rotate:"dark"===e?180:0},transition:{duration:.3},children:"dark"===e?(0,a.jsx)("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):(0,a.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})})}},3405:function(e,t,r){"use strict";r.d(t,{x:function(){return o}});var a=r(3464),n=r(7926);let s=r(257).env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000";class i{setupInterceptors(){this.client.interceptors.request.use(e=>{let{accessToken:t}=n.t.getState();return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,async e=>{var t;let r=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!r._retry){r._retry=!0;let{refreshToken:e,logout:t}=n.t.getState();if(e)try{let{access:t}=(await a.Z.post("".concat(s,"/api/kiosk/admin/auth/refresh/"),{refresh:e})).data;return n.t.getState().setAuth(t,e,n.t.getState().user),r.headers&&(r.headers.Authorization="Bearer ".concat(t)),this.client(r)}catch(e){return t(),window.location.href="/admin/login",Promise.reject(e)}else t(),window.location.href="/admin/login"}return Promise.reject(e)})}get instance(){return this.client}constructor(){this.client=a.Z.create({baseURL:s,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}}let o=new i().instance},7926:function(e,t,r){"use strict";r.d(t,{t:function(){return s}});var a=r(9625),n=r(6885);let s=(0,a.Ue)()((0,n.tJ)(e=>({accessToken:null,refreshToken:null,user:null,isAuthenticated:!1,setAuth:(t,r,a)=>e({accessToken:t,refreshToken:r,user:a,isAuthenticated:!0}),logout:()=>e({accessToken:null,refreshToken:null,user:null,isAuthenticated:!1}),updateUser:t=>e({user:t})}),{name:"auth-storage"}))},2009:function(e,t,r){"use strict";r.d(t,{f:function(){return s}});var a=r(9625),n=r(6885);let s=(0,a.Ue)()((0,n.tJ)(e=>({theme:"light",toggleTheme:()=>e(e=>{let t="light"===e.theme?"dark":"light";return document.documentElement.classList.toggle("dark","dark"===t),{theme:t}}),setTheme:t=>{document.documentElement.classList.toggle("dark","dark"===t),e({theme:t})}}),{name:"theme-storage"}))},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return s},u:function(){return o},x:function(){return i}});var a=r(1994),n=r(3335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}function i(e){return new Intl.NumberFormat("fa-IR",{style:"currency",currency:"IRR",minimumFractionDigits:0}).format(e)}function o(e){return new Intl.NumberFormat("fa-IR").format(e)}}},function(e){e.O(0,[883,0,626,971,117,744],function(){return e(e.s=7851)}),_N_E=e.O()}]);