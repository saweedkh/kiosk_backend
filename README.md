# Ù¾Ø±ÙˆÚ˜Ù‡ Ú©ÛŒÙˆØ³Ú© - Ø³ÛŒØ³ØªÙ… ÙØ±ÙˆØ´Ú¯Ø§Ù‡ÛŒ Ø¨Ø§ Ù¾Ø±Ø¯Ø§Ø®Øª Ú©Ø§Ø±Øªâ€ŒØ®ÙˆØ§Ù†

Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ú©ÛŒÙˆØ³Ú© Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ú©Ø§Ø±Øªâ€ŒØ®ÙˆØ§Ù† Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ù…Ù„ Ù…Ø­ØµÙˆÙ„Ø§ØªØŒ Ø³ÙØ§Ø±Ø´Ø§Øª Ùˆ Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ.

## ğŸ“‹ ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨

- [ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§](#ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§)
- [ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒâ€ŒÙ‡Ø§](#ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒâ€ŒÙ‡Ø§)
- [Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§](#Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§)
- [Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ](#Ù†ØµØ¨-Ùˆ-Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ)
- [Ø³Ø§Ø®ØªØ§Ø± Ù¾Ø±ÙˆÚ˜Ù‡](#Ø³Ø§Ø®ØªØ§Ø±-Ù¾Ø±ÙˆÚ˜Ù‡)
- [ØªÙ†Ø¸ÛŒÙ…Ø§Øª](#ØªÙ†Ø¸ÛŒÙ…Ø§Øª)
- [Ø§Ø¬Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡](#Ø§Ø¬Ø±Ø§ÛŒ-Ù¾Ø±ÙˆÚ˜Ù‡)
- [API Documentation](#api-documentation)
- [Testing](#testing)
- [Deployment](#deployment)

---

## ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§

### Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ú©ÛŒÙˆØ³Ú©
- âœ… Ù†Ù…Ø§ÛŒØ´ Ù…Ù†ÙˆÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª Ùˆ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§
- âœ… Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ (Ø§ÙØ²ÙˆØ¯Ù†ØŒ ÙˆÛŒØ±Ø§ÛŒØ´ØŒ Ø­Ø°Ù)
- âœ… Ù¾Ø±Ø¯Ø§Ø®Øª Ø§Ø² Ø·Ø±ÛŒÙ‚ Ú©Ø§Ø±Øªâ€ŒØ®ÙˆØ§Ù†
- âœ… Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´ Ùˆ ØªÙˆÙ„ÛŒØ¯ ÙØ§Ú©ØªÙˆØ± (PDF + JSON)
- âœ… Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙØ§Ú©ØªÙˆØ±

### Ø¨Ø±Ø§ÛŒ Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†
- âœ… Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØµÙˆÙ„Ø§Øª Ùˆ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§
- âœ… Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª
- âœ… Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÙØ§Ø±Ø´Ø§Øª
- âœ… Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ Ú©Ø§Ù…Ù„ (ÙØ±ÙˆØ´ØŒ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ØŒ Ù…Ø­ØµÙˆÙ„Ø§ØªØŒ Ù…ÙˆØ¬ÙˆØ¯ÛŒ)
- âœ… Ù…Ø¯ÛŒØ±ÛŒØª Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ… Ùˆ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§
- âœ… ØªÙ†Ø¸ÛŒÙ…Ø§Øª Gateway Ù¾Ø±Ø¯Ø§Ø®Øª (Ø§Ø² Ø·Ø±ÛŒÙ‚ Environment Variables)

### ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ ÙÙ†ÛŒ
- âœ… Session-based Authentication Ø¨Ø±Ø§ÛŒ Ú©ÛŒÙˆØ³Ú©
- âœ… Django Session Authentication Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ù…ÛŒÙ†
- âœ… Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø¨Ø§ ØªØ§Ø±ÛŒØ®Ú†Ù‡ ØªØºÛŒÛŒØ±Ø§Øª
- âœ… Ù„Ø§Ú¯ Ú©Ø§Ù…Ù„ ØªÙ…Ø§Ù… ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ Ùˆ Ø¹Ù…Ù„ÛŒØ§Øª (Console Ùˆ File-based)
- âœ… ØªÙˆÙ„ÛŒØ¯ ÙØ§Ú©ØªÙˆØ± PDF Ùˆ JSON
- âœ… Ù…Ø¹Ù…Ø§Ø±ÛŒ Layered (API, Service, Selector, Model)
- âœ… Modular API Structure

---

## ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒâ€ŒÙ‡Ø§

### Backend
- **Django 4.2.16**: Framework Ø§ØµÙ„ÛŒ
- **Django REST Framework 3.15.2**: Ø¨Ø±Ø§ÛŒ API
- **PostgreSQL**: Database
- **ReportLab 4.2.5**: Ø¨Ø±Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ PDF

### Tools
- **django-cors-headers 4.6.0**: Ø¨Ø±Ø§ÛŒ CORS
- **django-filter 24.3**: Ø¨Ø±Ø§ÛŒ Filtering
- **python-dotenv 1.0.1**: Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Environment Variables
- **Pillow 10.4.0**: Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ ØªØµØ§ÙˆÛŒØ±

---

## Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§

### Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø±
- Python 3.9+
- PostgreSQL 12+
- Virtual Environment (venv ÛŒØ§ virtualenv)

### Python Packages
ØªÙ…Ø§Ù… Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø¯Ø± `requirements/` ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.

---

## Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ

### 1. Clone Ù¾Ø±ÙˆÚ˜Ù‡
```bash
git clone https://github.com/saweedkh/kiosk_backend.git
cd kiosk_backend
```

### 2. Ø§ÛŒØ¬Ø§Ø¯ Virtual Environment
```bash
python3.9 -m venv venv
source venv/bin/activate  # Linux/Mac
# ÛŒØ§
venv\Scripts\activate  # Windows
```

### 3. Ù†ØµØ¨ Dependencies
```bash
pip install -r requirements/base.txt
pip install -r requirements/development.txt
```

### 4. ØªÙ†Ø¸ÛŒÙ… Database

#### Ø§ÛŒØ¬Ø§Ø¯ Database Ø¯Ø± PostgreSQL
```sql
CREATE DATABASE kiosk_db;
CREATE USER kiosk_user WITH PASSWORD 'your_password';
ALTER ROLE kiosk_user SET client_encoding TO 'utf8';
ALTER ROLE kiosk_user SET default_transaction_isolation TO 'read committed';
ALTER ROLE kiosk_user SET timezone TO 'Asia/Tehran';
GRANT ALL PRIVILEGES ON DATABASE kiosk_db TO kiosk_user;
```

### 5. ØªÙ†Ø¸ÛŒÙ… Environment Variables

Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† `.env.example` Ø¨Ù‡ `.env`:
```bash
cp .env.example .env
```

ÙˆÛŒØ±Ø§ÛŒØ´ `.env`:
```env
SECRET_KEY=your-secret-key-here-change-in-production
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

DATABASE_NAME=kiosk_db
DATABASE_USER=kiosk_user
DATABASE_PASSWORD=your_password
DATABASE_HOST=localhost
DATABASE_PORT=5432

PAYMENT_GATEWAY_NAME=mock
PAYMENT_GATEWAY_ACTIVE=True
PAYMENT_GATEWAY_API_KEY=mock_api_key_123
PAYMENT_GATEWAY_API_SECRET=mock_api_secret_abc
PAYMENT_GATEWAY_MERCHANT_ID=mock_merchant_id_xyz
PAYMENT_GATEWAY_TERMINAL_ID=mock_terminal_id_789
PAYMENT_GATEWAY_CALLBACK_URL=http://localhost:8000/api/kiosk/payment/verify/
```

### 6. Ø§Ø¬Ø±Ø§ÛŒ Migrations
```bash
python manage.py migrate
```

### 7. Ø§ÛŒØ¬Ø§Ø¯ Superuser
```bash
python manage.py createsuperuser
```

### 8. Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Static Files
```bash
python manage.py collectstatic --noinput
```

---

## Ø³Ø§Ø®ØªØ§Ø± Ù¾Ø±ÙˆÚ˜Ù‡

```
kiosk/
â”œâ”€â”€ config/                 # Project Configuration
â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”œâ”€â”€ development.py
â”‚   â”‚   â””â”€â”€ production.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ wsgi.py
â”‚
â”œâ”€â”€ apps/                   # Django Apps
â”‚   â”œâ”€â”€ products/          # Products Module
â”‚   â”œâ”€â”€ cart/              # Cart Module
â”‚   â”œâ”€â”€ orders/            # Orders Module
â”‚   â”œâ”€â”€ payment/           # Payment Module
â”‚   â”œâ”€â”€ logs/               # Logs Module
â”‚   â”œâ”€â”€ admin_panel/        # Admin Panel
â”‚   â””â”€â”€ core/               # Core Utilities
â”‚
â”œâ”€â”€ static/                 # Static Files
â”œâ”€â”€ media/                  # Media Files
â”œâ”€â”€ logs/                   # Application Logs
â”œâ”€â”€ requirements/           # Python Dependencies
â”œâ”€â”€ docs/                   # Documentation
â””â”€â”€ tests/                  # Integration Tests
```

Ø¨Ø±Ø§ÛŒ Ø¬Ø²Ø¦ÛŒØ§Øª Ø¨ÛŒØ´ØªØ± Ø³Ø§Ø®ØªØ§Ø±ØŒ Ø¨Ù‡ [IMPLEMENTATION_ROADMAP.md](./IMPLEMENTATION_ROADMAP.md) Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯.

---

## ØªÙ†Ø¸ÛŒÙ…Ø§Øª

### Database Settings
Ø¯Ø± `config/settings/base.py` ÛŒØ§ `.env` ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯.

### Payment Gateway
Ø¨Ø±Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ… Gateway Ù¾Ø±Ø¯Ø§Ø®ØªØŒ Ù…Ù‚Ø§Ø¯ÛŒØ± Ø±Ø§ Ø¯Ø± ÙØ§ÛŒÙ„ `.env` ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯:
- `PAYMENT_GATEWAY_NAME`: Ù†Ø§Ù… Gateway (Ù…Ø«Ù„Ø§Ù‹ `mock`)
- `PAYMENT_GATEWAY_ACTIVE`: ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù† Gateway
- `PAYMENT_GATEWAY_API_KEY`: Ú©Ù„ÛŒØ¯ API
- `PAYMENT_GATEWAY_API_SECRET`: Secret Key
- `PAYMENT_GATEWAY_MERCHANT_ID`: Ø´Ù†Ø§Ø³Ù‡ Merchant
- `PAYMENT_GATEWAY_TERMINAL_ID`: Ø´Ù†Ø§Ø³Ù‡ Terminal
- `PAYMENT_GATEWAY_CALLBACK_URL`: URL Ø¨Ø±Ø§ÛŒ Callback

---

## Ø§Ø¬Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡

### Development Mode
```bash
python manage.py runserver
```

Ù¾Ø±ÙˆÚ˜Ù‡ Ø¯Ø± `http://localhost:8000` Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

### API Documentation
Ù…Ø³ØªÙ†Ø¯Ø§Øª Ú©Ø§Ù…Ù„ API Ø¯Ø± ÙØ§ÛŒÙ„ [API_DOCUMENTATION.md](./API_DOCUMENTATION.md) Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª.

### Admin Panel
```
http://localhost:8000/admin/
```

---

## API Documentation

Ù…Ø³ØªÙ†Ø¯Ø§Øª Ú©Ø§Ù…Ù„ API Ø¯Ø± [API_DOCUMENTATION.md](./API_DOCUMENTATION.md) Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª.

### Base URLs
- **Kiosk APIs**: `/api/kiosk/`
- **Admin APIs**: `/api/kiosk/admin-panel/`

### Ù…Ø«Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡

#### Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ù…Ø­ØµÙˆÙ„Ø§Øª
```bash
curl http://localhost:8000/api/kiosk/products/
```

#### Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„ Ø¨Ù‡ Ø³Ø¨Ø¯
```bash
curl -X POST http://localhost:8000/api/kiosk/cart-items/ \
  -H "Content-Type: application/json" \
  -d '{"product_id": 1, "quantity": 2}'
```

---

## Testing

### Ø§Ø¬Ø±Ø§ÛŒ ØªÙ…Ø§Ù… Tests
```bash
python manage.py test
```

### Ø§Ø¬Ø±Ø§ÛŒ Tests ÛŒÚ© App Ø®Ø§Øµ
```bash
python manage.py test apps.products
```

### Ø§Ø¬Ø±Ø§ÛŒ ÛŒÚ© Test Ø®Ø§Øµ
```bash
python manage.py test apps.products.tests.test_models.TestProductModel
```

### Ø¨Ø§ Coverage
```bash
coverage run --source='.' manage.py test
coverage report
coverage html
```

---

## Deployment

### Production Settings

1. ØªØºÛŒÛŒØ± `DEBUG = False` Ø¯Ø± `config/settings/production.py`
2. ØªÙ†Ø¸ÛŒÙ… `ALLOWED_HOSTS`
3. ØªÙ†Ø¸ÛŒÙ… `SECRET_KEY` Ø¯Ø± `.env`
4. ØªÙ†Ø¸ÛŒÙ… Static Files Ùˆ Media Files
5. ØªÙ†Ø¸ÛŒÙ… SSL Certificate

### Ø¨Ø§ Gunicorn
```bash
gunicorn config.wsgi:application --bind 0.0.0.0:8000
```

### Ø¨Ø§ Nginx
Ù…Ø«Ø§Ù„ Configuration:
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /static/ {
        alias /path/to/static/;
    }

    location /media/ {
        alias /path/to/media/;
    }
}
```

### Ø¨Ø§ Supervisor
Ù…Ø«Ø§Ù„ Configuration:
```ini
[program:kiosk]
command=/path/to/venv/bin/gunicorn config.wsgi:application --bind 127.0.0.1:8000
directory=/path/to/kiosk
user=www-data
autostart=true
autorestart=true
```

---

## Ù†Ù‚Ø´Ù‡ Ø±Ø§Ù‡ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ

Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù†Ù‚Ø´Ù‡ Ø±Ø§Ù‡ Ú©Ø§Ù…Ù„ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒØŒ Ø¨Ù‡ [IMPLEMENTATION_ROADMAP.md](./IMPLEMENTATION_ROADMAP.md) Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯.

---

## Troubleshooting

### Ù…Ø´Ú©Ù„ Ø§ØªØµØ§Ù„ Database
- Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ PostgreSQL Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ø¨Ø§Ø´Ø¯
- Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Credentials Ø¯Ø± `.env` Ø¯Ø±Ø³Øª Ø¨Ø§Ø´Ø¯
- Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Database Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯

### Ù…Ø´Ú©Ù„ Static Files
```bash
python manage.py collectstatic --noinput
```

### Ù…Ø´Ú©Ù„ Migrations
```bash
python manage.py makemigrations
python manage.py migrate
```

---

## Contributing

1. Fork Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ø² [GitHub Repository](https://github.com/saweedkh/kiosk_backend)
2. Clone Ù¾Ø±ÙˆÚ˜Ù‡ Fork Ø´Ø¯Ù‡
3. Ø§ÛŒØ¬Ø§Ø¯ Branch (`git checkout -b feature/AmazingFeature`)
4. Commit ØªØºÛŒÛŒØ±Ø§Øª (`git commit -m 'Add some AmazingFeature'`)
5. Push Ø¨Ù‡ Branch (`git push origin feature/AmazingFeature`)
6. Ø§ÛŒØ¬Ø§Ø¯ Pull Request Ø¯Ø± GitHub

---

## License

Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ ØªØ­Øª Ù…Ø¬ÙˆØ² MIT Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡ Ø§Ø³Øª.

---

## Support

Ø¨Ø±Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ùˆ Ø³ÙˆØ§Ù„Ø§Øª:
- Ø§ÛŒØ¬Ø§Ø¯ Issue Ø¯Ø± [GitHub Repository](https://github.com/saweedkh/kiosk_backend)
- ØªÙ…Ø§Ø³ Ø¨Ø§ ØªÛŒÙ… ØªÙˆØ³Ø¹Ù‡

---

## Changelog

### Version 1.0.0
- Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ…
- Products Module
- Cart Module
- Orders Module
- Payment Module (Mock Gateway)
- Logs Module (Console Ùˆ File-based)
- Admin Panel
- Modular API Structure
- Layered Architecture

---

**Ù…ÙˆÙÙ‚ Ø¨Ø§Ø´ÛŒØ¯! ğŸš€**

