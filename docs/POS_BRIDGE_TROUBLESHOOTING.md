# ุนุจโุงุจ POS Bridge Service

## โ ุฎุทุง: "An attempt was made to access a socket in a way forbidden by its access permissions"

ุงู ุฎุทุง ูุนูููุงู ุจู ุฏูุงู ุฒุฑ ุฑุฎ ูโุฏูุฏ:

### 1๏ธโฃ ูพูุฑุช ูุจูุงู ุงุณุชูุงุฏู ุดุฏู

**ุจุฑุฑุณ:**
```bash
netstat -ano | findstr :8080
```

ุงฺฏุฑ ุฎุฑูุฌ ุฏุงุดุชุ ูพูุฑุช ุงุณุชูุงุฏู ุดุฏู ุงุณุช.

**ุฑุงูโุญู:**
- ุณุฑูุณ ูุจู ุฑุง ุจุจูุฏุฏ
- ุง ูพูุฑุช ุฑุง ุชุบุฑ ุฏูุฏ:
  ```env
  POS_BRIDGE_PORT=8081
  ```

### 2๏ธโฃ ูุงุฒ ุจู ุฏุณุชุฑุณ Administrator

**ุฑุงูโุญู:**
1. Command Prompt ุฑุง ุจุจูุฏุฏ
2. ุฑุงุณุช ฺฉูฺฉ ุฑู Command Prompt
3. ุงูุชุฎุงุจ "Run as administrator"
4. ุฏูุจุงุฑู ุงุฌุฑุง ฺฉูุฏ:
   ```bash
   python pos_bridge_service.py
   ```

### 3๏ธโฃ ูุงุฑูุงู ููุฏูุฒ

**ุฑุงูโุญู 1: ุงุถุงูู ฺฉุฑุฏู Exception (ุชูุตู ูโุดูุฏ)**

1. Windows Security ุฑุง ุจุงุฒ ฺฉูุฏ
2. Firewall & network protection
3. Advanced settings
4. Inbound Rules > New Rule
5. Port > Next
6. TCP > Specific local ports: `8080` > Next
7. Allow the connection > Next
8. ุชูุงู Profile ูุง ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ > Next
9. ูุงู: "POS Bridge Service" > Finish

**ุฑุงูโุญู 2: ุบุฑูุนุงู ฺฉุฑุฏู ูููุชุงู (ููุท ุจุฑุง ุชุณุช)**

```bash
# ุจู ุนููุงู Administrator
netsh advfirewall set allprofiles state off
```

โ๏ธ **ุชูุฌู:** ุจุนุฏ ุงุฒ ุชุณุชุ ูุงุฑูุงู ุฑุง ุฏูุจุงุฑู ูุนุงู ฺฉูุฏ:
```bash
netsh advfirewall set allprofiles state on
```

### 4๏ธโฃ ูพูุฑุช ุฏุฑ ูุญุฏูุฏู Reserved

ููุฏูุฒ ุจุฑุฎ ูพูุฑุชโูุง ุฑุง reserve ูโฺฉูุฏ.

**ุจุฑุฑุณ:**
```bash
netsh interface ipv4 show excludedportrange protocol=tcp
```

**ุฑุงูโุญู:**
ูพูุฑุช ุฏฺฏุฑ ุงูุชุฎุงุจ ฺฉูุฏ (ูุซูุงู 8081, 9000, 9090)

## ๐ง ุฑุงูโุญู ุณุฑุน

### ุชุบุฑ ูพูุฑุช (ุณุงุฏูโุชุฑู ุฑุงู)

1. ุฏุฑ ูุงู `.env`:
   ```env
   POS_BRIDGE_PORT=8081
   ```

2. ุง ุฏุฑ Command Prompt:
   ```bash
   set POS_BRIDGE_PORT=8081
   python pos_bridge_service.py
   ```

3. ุฏุฑ ุณุณุชู ุงุตู (Mac) ูู ูพูุฑุช ุฑุง ุชุบุฑ ุฏูุฏ:
   ```env
   POS_BRIDGE_PORT=8081
   ```

## โ ุชุณุช ุงุชุตุงู

ุจุนุฏ ุงุฒ ุฑุงูโุงูุฏุงุฒุ ุชุณุช ฺฉูุฏ:

```bash
# ุงุฒ ููุงู ุณุณุชู ููุฏูุฒ
curl http://localhost:8080/health

# ุงุฒ ุณุณุชู ุฏฺฏุฑ (Mac/Linux)
curl http://192.168.1.50:8080/health
```

ุงฺฏุฑ `{"status": "ok"}` ุฏุฑุงูุช ฺฉุฑุฏุฏุ ุณุฑูุณ ุฏุฑุณุช ฺฉุงุฑ ูโฺฉูุฏ.

## ๐ ุจุฑุฑุณ ูุดฺฉูุงุช ุฏฺฏุฑ

### ูุดฺฉู: ุณุฑูุณ ุดุฑูุน ูโุดูุฏ ุงูุง ุงุฒ ุฎุงุฑุฌ ูุงุจู ุฏุณุชุฑุณ ูุณุช

**ุจุฑุฑุณ:**
1. IP ุณุณุชู ููุฏูุฒ ุฑุง ุจุฑุฑุณ ฺฉูุฏ:
   ```bash
   ipconfig
   ```
   
2. ูุทูุฆู ุดูุฏ ฺฉู `HOST=0.0.0.0` ุงุณุช (ูู `127.0.0.1`)

3. ูุงุฑูุงู ุฑุง ุจุฑุฑุณ ฺฉูุฏ (ุจุฎุด ุจุงูุง)

4. ุงุฒ ุณุณุชู ุฏฺฏุฑ ping ฺฉูุฏ:
   ```bash
   ping 192.168.1.50
   ```

### ูุดฺฉู: DLL ููุฏ ููโุดูุฏ

**ุจุฑุฑุณ:**
1. ูุณุฑ DLL ุฑุง ุจุฑุฑุณ ฺฉูุฏ:
   ```env
   POS_DLL_PATH=C:\full\path\to\pna.pcpos.dll
   ```

2. ูุทูุฆู ุดูุฏ ฺฉู DLL ุฏุฑ ูุณุฑ ุฏุฑุณุช ุงุณุช

3. ุจุฑุฑุณ ฺฉูุฏ ฺฉู pythonnet ูุตุจ ุดุฏู:
   ```bash
   pip list | findstr pythonnet
   ```

## ๐ ูุงฺฏโูุง

ุจุฑุง ุฏุฏู ูุงฺฏโูุง ุจุดุชุฑุ ุฏุฑ ฺฉุฏ `debug=True` ฺฉูุฏ:

```python
app.run(host=HOST, port=PORT, debug=True)
```

ุง ุงุฒ logging ุงุณุชูุงุฏู ฺฉูุฏ.

