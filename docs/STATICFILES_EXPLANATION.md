# توضیح پوشه staticfiles

## staticfiles چیست؟

پوشه `staticfiles` شامل **فایل‌های build شده فرانت** (Next.js) است که برای نمایش رابط کاربری وب‌سایت لازم هستند.

## ساختار پوشه staticfiles

```
staticfiles/
└── frontend/
    ├── index.html              # صفحه اصلی (SPA)
    ├── 404.html                # صفحه خطای 404
    ├── admin/
    │   ├── index.html          # پنل ادمین
    │   └── login/
    │       └── index.html      # صفحه لاگین ادمین
    ├── font/                   # فونت‌های فارسی (Vazir)
    │   ├── Vazir.ttf
    │   ├── Vazir-Bold.ttf
    │   └── ...
    └── _next/                  # فایل‌های build شده Next.js
        └── static/
            ├── chunks/         # فایل‌های JavaScript
            ├── css/            # فایل‌های CSS
            └── media/          # فونت‌های وب
```

## محتویات staticfiles

### 1. فایل‌های HTML

- **`index.html`** - صفحه اصلی برنامه (SPA)
- **`admin/index.html`** - پنل مدیریت
- **`admin/login/index.html`** - صفحه لاگین ادمین
- **`404.html`** - صفحه خطای 404

**چرا لازم است؟**
این فایل‌های HTML برای نمایش صفحات وب‌سایت استفاده می‌شوند.

### 2. فایل‌های JavaScript (`_next/static/chunks/`)

شامل کدهای JavaScript کامپایل شده فرانت:
- `framework-*.js` - فریمورک Next.js
- `main-*.js` - کد اصلی برنامه
- `app/**/*.js` - کدهای صفحات مختلف
- `polyfills-*.js` - پشتیبانی از مرورگرهای قدیمی

**چرا لازم است؟**
بدون این فایل‌ها، رابط کاربری کار نمی‌کند و صفحات خالی نمایش داده می‌شوند.

### 3. فایل‌های CSS (`_next/static/css/`)

شامل استایل‌های CSS کامپایل شده:
- `*.css` - استایل‌های صفحات

**چرا لازم است؟**
بدون این فایل‌ها، صفحات بدون استایل نمایش داده می‌شوند.

### 4. فونت‌ها (`font/` و `_next/static/media/`)

- **`font/Vazir-*.ttf`** - فونت‌های فارسی Vazir
- **`_next/static/media/*.ttf`** - فونت‌های وب (برای نمایش در مرورگر)

**چرا لازم است؟**
برای نمایش صحیح متن‌های فارسی در صفحات.

## چرا باید کنار EXE باشد؟

1. **Django نمی‌تواند فایل‌های static را از داخل EXE بخواند**
   - PyInstaller فایل‌های static را درون EXE قرار نمی‌دهد
   - باید به صورت فایل‌های جداگانه در کنار EXE باشند

2. **Next.js نیاز به فایل‌های build دارد**
   - فایل‌های JavaScript و CSS باید قابل دسترسی باشند
   - مرورگر باید بتواند این فایل‌ها را دانلود کند

3. **رابط کاربری بدون staticfiles کار نمی‌کند**
   - صفحات HTML بدون JavaScript و CSS نمایش داده می‌شوند
   - برنامه به درستی کار نمی‌کند

## نحوه کپی کردن

### از پوشه dist

پس از ساخت EXE، پوشه `staticfiles` در پوشه `dist` قرار دارد:

```
dist/
├── kiosk.exe
└── staticfiles/    ← این پوشه را کپی کنید
    └── frontend/
        └── ...
```

### ساختار نهایی در کنار EXE

```
C:\Kiosk\
├── kiosk.exe
├── .env
├── staticfiles\        ← این پوشه باید اینجا باشد
│   └── frontend\
│       ├── index.html
│       ├── admin/
│       ├── font/
│       └── _next/
└── ...
```

## بررسی صحت کپی

برای اطمینان از اینکه staticfiles درست کپی شده است:

1. **بررسی وجود فایل‌های اصلی:**
   - ✅ `staticfiles/frontend/index.html` باید وجود داشته باشد
   - ✅ `staticfiles/frontend/_next/static/chunks/` باید وجود داشته باشد

2. **بررسی حجم:**
   - پوشه `staticfiles` معمولاً چند مگابایت حجم دارد
   - اگر خیلی کوچک است، احتمالاً کامل کپی نشده است

3. **تست در مرورگر:**
   - بعد از اجرای EXE، به `http://localhost:8000` بروید
   - اگر صفحات به درستی نمایش داده می‌شوند، staticfiles درست است
   - اگر صفحات خالی یا بدون استایل هستند، staticfiles مشکل دارد

## عیب‌یابی

### مشکل: صفحات خالی نمایش داده می‌شوند

**علت:** staticfiles کپی نشده یا ناقص است

**راه حل:**
1. مطمئن شوید پوشه `staticfiles` در کنار EXE است
2. بررسی کنید که `staticfiles/frontend/index.html` وجود دارد
3. دوباره از پوشه `dist` کپی کنید

### مشکل: استایل‌ها اعمال نمی‌شوند

**علت:** فایل‌های CSS موجود نیستند

**راه حل:**
1. بررسی کنید `staticfiles/frontend/_next/static/css/` وجود دارد
2. بررسی کنید فایل‌های `.css` در آن پوشه هستند

### مشکل: فونت‌های فارسی نمایش داده نمی‌شوند

**علت:** فایل‌های فونت موجود نیستند

**راه حل:**
1. بررسی کنید `staticfiles/frontend/font/` وجود دارد
2. بررسی کنید فایل‌های `.ttf` در آن پوشه هستند

## خلاصه

✅ **staticfiles شامل:**
- فایل‌های HTML صفحات
- فایل‌های JavaScript (کدهای فرانت)
- فایل‌های CSS (استایل‌ها)
- فایل‌های فونت (برای فارسی)

✅ **باید کنار EXE باشد** چون:
- Django نمی‌تواند از داخل EXE بخواند
- مرورگر باید بتواند فایل‌ها را دانلود کند
- بدون آن رابط کاربری کار نمی‌کند

✅ **نحوه کپی:**
- از پوشه `dist` کپی کنید
- در کنار `kiosk.exe` قرار دهید
- ساختار `staticfiles/frontend/` را حفظ کنید

