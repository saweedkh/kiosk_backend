# ูุงุฒููุฏโูุง DLL ุจุฑุง ุงุชุตุงู ุจู ุฏุณุชฺฏุงู POS

ุงู ุณูุฏ ูุณุช ฺฉุงูู ฺุฒูุง ฺฉู DLL ุงุฒ ุฏุณุชฺฏุงู POS ูุงุฒ ุฏุงุฑุฏ ุฑุง ุชูุถุญ ูโุฏูุฏ.

## ๐ด ุถุฑูุฑ (Required) - ุจุฏูู ุงูโูุง ฺฉุงุฑ ููโฺฉูุฏ

### 1. ุชูุธูุงุช ุงุชุตุงู TCP/IP (Socket)

ุงู ููุงุฑุฏ ุจุฑุง ุจุฑูุฑุงุฑ ุงุชุตุงู ุจุง ุฏุณุชฺฏุงู POS **ุถุฑูุฑ** ูุณุชูุฏ:

```python
pos.Ip = "192.168.20.249"              # โ ุถุฑูุฑ - ุขุฏุฑุณ IP ุฏุณุชฺฏุงู POS
pos.Port = 1362                        # โ ุถุฑูุฑ - ูพูุฑุช TCP (ูุนูููุงู 1362)
pos.ConnectionType = PCPOS.cnType.LAN  # โ ุถุฑูุฑ - ููุน ุงุชุตุงู (LAN = TCP/IP)
```

**ุฏุฑ ูุงู `.env`:**
```env
POS_CONNECTION_TYPE=tcp
POS_TCP_HOST=192.168.20.249
POS_TCP_PORT=1362
```

### 2. ุดูุงุณู ุชุฑููุงู (Terminal ID)

```python
pos.TerminalID = "30739260"  # โ ุถุฑูุฑ - ุดูุงุณู ุชุฑููุงู ุฏุณุชฺฏุงู
```

**ุฏุฑ ูุงู `.env`:**
```env
PAYMENT_GATEWAY_TERMINAL_ID=30739260
```

### 3. ูุจูุบ ุชุฑุงฺฉูุด (Amount)

```python
pos.Amount = 50000  # โ ุถุฑูุฑ - ูุจูุบ ุจู ุฑุงู (ูุจู ุงุฒ ุงุฑุณุงู ุชุฑุงฺฉูุด)
```

## ๐ก ุชูุตู ูโุดูุฏ (Recommended) - ุจุฑุง ุนููฺฉุฑุฏ ุจูุชุฑ

### 4. ุดูุงุฑู ุณุฑุงู ุฏุณุชฺฏุงู (Serial Number)

```python
pos.SerialNumber = "54040919"  # ๐ก ุชูุตู ูโุดูุฏ
# ุง
pos.DeviceSerial = "54040919"
```

**ุฏุฑ ูุงู `.env`:**
```env
POS_DEVICE_SERIAL_NUMBER=54040919
```

### 5. ุดูุงุฑู ุณูุงุฑุด (Order Number)

```python
pos.OrderNumber = "ORDER-001"  # ๐ก ุชูุตู ูโุดูุฏ - ุจุฑุง ุฑุฏุงุจ ุชุฑุงฺฉูุด
```

## ๐ข ุงุฎุชุงุฑ (Optional) - ุจุฑุง ุงุทูุงุนุงุช ุจุดุชุฑ

### 6. ูุงู ูุดุชุฑ (Customer Name)

```python
pos.CustomerName = "ุนู ุงุญูุฏ"  # ๐ข ุงุฎุชุงุฑ
```

### 7. Merchant ID

```python
pos.MerchantID = "..."  # ๐ข ุงุฎุชุงุฑ - ุงฺฏุฑ ุฏุณุชฺฏุงู ูุงุฒ ุฏุงุดุชู ุจุงุดุฏ
```

**ุฏุฑ ูุงู `.env`:**
```env
PAYMENT_GATEWAY_MERCHANT_ID=your_merchant_id
```

## ๐ ุฎูุงุตู ุชูุธูุงุช ุถุฑูุฑ ุฏุฑ `.env`

```env
# ุถุฑูุฑ ุจุฑุง ุงุชุตุงู
POS_CONNECTION_TYPE=tcp
POS_TCP_HOST=192.168.20.249
POS_TCP_PORT=1362

# ุถุฑูุฑ ุจุฑุง ุดูุงุณุง ุฏุณุชฺฏุงู
PAYMENT_GATEWAY_TERMINAL_ID=30739260

# ุชูุตู ูโุดูุฏ
POS_DEVICE_SERIAL_NUMBER=54040919

# ุถุฑูุฑ ุจุฑุง ุงุณุชูุงุฏู ุงุฒ DLL
POS_USE_DLL=True
POS_DLL_PATH=/path/to/pna.pcpos.dll
```

## ๐ ุชุฑุชุจ ุชูุธูุงุช ุฏุฑ ฺฉุฏ

```python
# 1. ุงุฌุงุฏ ููููู PCPOS
pos = PCPOS()

# 2. ุชูุธูุงุช ุงุชุตุงู (ุถุฑูุฑ)
pos.Ip = "192.168.20.249"
pos.Port = 1362
pos.ConnectionType = PCPOS.cnType.LAN

# 3. ุชูุธูุงุช ุชุฑููุงู (ุถุฑูุฑ)
pos.TerminalID = "30739260"

# 4. ุชูุธูุงุช ุงุฎุชุงุฑ
if serial_number:
    pos.SerialNumber = serial_number

# 5. ุชุณุช ุงุชุตุงู (ุชูุตู ูโุดูุฏ)
if pos.TestConnection():
    print("ุงุชุตุงู ูููู")
    
    # 6. ุชูุธู ูุจูุบ (ูุจู ุงุฒ ุงุฑุณุงู ุชุฑุงฺฉูุด)
    pos.Amount = 50000
    
    # 7. ุงุฑุณุงู ุชุฑุงฺฉูุด
    pos.send_transaction()
    
    # 8. ุฏุฑุงูุช ูพุงุณุฎ
    response = pos.GetParsedResp()
```

## โ๏ธ ูฺฉุงุช ููู

1. **IP ู Port ุจุงุฏ ุฏุฑุณุช ุจุงุดูุฏ**: ุงฺฏุฑ IP ุง Port ุงุดุชุจุงู ุจุงุดุฏุ ุงุชุตุงู ุจุฑูุฑุงุฑ ููโุดูุฏ
2. **Terminal ID ุจุงุฏ ุจุง ุฏุณุชฺฏุงู ูุทุงุจูุช ุฏุงุดุชู ุจุงุดุฏ**: ุงฺฏุฑ Terminal ID ุงุดุชุจุงู ุจุงุดุฏุ ุชุฑุงฺฉูุด ุฑุฏ ูโุดูุฏ
3. **ุฏุณุชฺฏุงู ุจุงุฏ ุฑูุดู ู ูุชุตู ุจู ุดุจฺฉู ุจุงุดุฏ**: ูุจู ุงุฒ ุงุฑุณุงู ุชุฑุงฺฉูุดุ ูุทูุฆู ุดูุฏ ุฏุณุชฺฏุงู ุฑูุดู ุงุณุช
4. **ConnectionType ุจุงุฏ LAN ุจุงุดุฏ**: ุจุฑุง TCP/IP ุจุงุฏ `PCPOS.cnType.LAN` ุงุณุชูุงุฏู ุดูุฏ
5. **Amount ุจุงุฏ ูุจู ุงุฒ send_transaction ุชูุธู ุดูุฏ**: ูุจูุบ ุจุงุฏ ูุจู ุงุฒ ุงุฑุณุงู ุชุฑุงฺฉูุด ุชูุธู ุดูุฏ

## ๐งช ุชุณุช ุชูุธูุงุช

ุจุฑุง ุชุณุช ุงูฺฉู ููู ฺุฒ ุฏุฑุณุช ุชูุธู ุดุฏู ุงุณุช:

```bash
# ููุงุด ุชูุธูุงุช
python manage.py show_pos_config

# ุชุณุช ุงุชุตุงู
python manage.py test_pos_connection

# ุงุฑุณุงู ุชุฑุงฺฉูุด ุชุณุช
python manage.py send_pos_payment 50000
```

## ๐ ูุซุงู ฺฉุงูู

```python
import clr
clr.AddReference('pna.pcpos.dll')
from Intek.PcPosLibrary import PCPOS

# ุงุฌุงุฏ ููููู
pos = PCPOS()

# ุชูุธูุงุช ุถุฑูุฑ ุงุชุตุงู
pos.Ip = "192.168.20.249"
pos.Port = 1362
pos.ConnectionType = PCPOS.cnType.LAN

# ุชูุธูุงุช ุถุฑูุฑ ุชุฑููุงู
pos.TerminalID = "30739260"

# ุชูุธูุงุช ุชูุตู ุดุฏู
pos.SerialNumber = "54040919"

# ุชุณุช ุงุชุตุงู
if pos.TestConnection():
    # ุชูุธู ูุจูุบ
    pos.Amount = 50000
    
    # ุงุฑุณุงู ุชุฑุงฺฉูุด
    pos.send_transaction()
    
    # ุฏุฑุงูุช ูพุงุณุฎ
    response = pos.GetParsedResp()
    print(response)
```

## โ ฺุฒูุง ฺฉู ูุงุฒ ูุณุช

- **Serial Port**: ุงฺฏุฑ ุงุฒ TCP/IP ุงุณุชูุงุฏู ูโฺฉูุฏุ ูุงุฒ ุจู Serial Port ูุฏุงุฑุฏ
- **Baudrate**: ููุท ุจุฑุง Serial Port ูุงุฒ ุงุณุช
- **Merchant ID**: ุฏุฑ ุจุดุชุฑ ููุงุฑุฏ ูุงุฒ ูุณุช (ููุท Terminal ID ฺฉุงู ุงุณุช)
- **API Key/Secret**: DLL ุงุฒ API Key ุงุณุชูุงุฏู ููโฺฉูุฏ

